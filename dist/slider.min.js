'use strict';var _createClass=function(){function a(b,c){for(var i=0;i<c.length;i++){var d=c[i];d.enumerable=d.enumerable||false;d.configurable=true;if('value'in d)d.writable=true;Object.defineProperty(b,d.key,d)}}return function(b,c,d){if(c)a(b.prototype,c);if(d)a(b,d);return b}}();function _classCallCheck(a,b){if(!(a instanceof b)){throw new TypeError('Cannot call a class as a function')}}var CustomEvent=function a(b){var c=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{bubbles:!1,cancelable:!1,detail:null};_classCallCheck(this,a);this.event=new Event(b,c)};var SliderElement=function(){function a(b,c){_classCallCheck(this,a);this.container=b;this.optionsOverride=c;this.slides={};this.dx=0;this.dy=0;this.sliderX=0;this.mousedown={x:0,y:0,active:!1};this.children={};this.sliderWidth=0;this.events={};this.animationFrameId=0;this.transitionDuration=350;this.callbackTimeout=500;this.customEvents={};this.options={};this.currentSpeed=0;this.currentSlide=0;this.concurrentSlides=1;this.isAnimating=!1;this.images=[];this.init()}_createClass(a,[{key:'init',value:function init(){var c=this;this.slides=this.container.querySelector('div.slides');this.children=this.slides.children;this.sliderWidth=this.container.offsetWidth;this.images=this.container.querySelectorAll('img');this.customEvents={sliderdrop:new CustomEvent('sliderdrop',{}),boundsreached:new CustomEvent('sliderboundsreached',{}),slidecomplete:new CustomEvent('slidecomplete',{})};this.options={snapToNearest:!0,snapSpeedMillis:400};for(var b in this.optionsOverride){if(this.hasOwnProperty(b)){this[b]=this.optionsOverride[b]}}this.images.forEach(function(d){d.addEventListener('load',function(){c.sliderWidth=c.container.offsetWidth})});this.events=[{listeners:{mouse:'dragstart',touch:'touchdragstart'},attachTo:this.container,functionCall:this.onDragStart},{listeners:{mouse:'mousedown',touch:'touchstart'},attachTo:this.container,functionCall:this.onDown},{listeners:{mouse:'mousemove',touch:'touchmove'},attachTo:this.container,functionCall:this.onMove},{listeners:{mouse:'mouseup',touch:'touchend'},attachTo:this.container,functionCall:this.onUp},{listeners:{mouse:'mouseleave',touch:'touchleave'},attachTo:this.container,functionCall:this.onLeave},{listeners:{mouse:'sliderdrop',touch:'sliderdrop'},attachTo:this.container,functionCall:this.onSliderDrop},{listeners:{mouse:'resize',touch:'resize'},attachTo:window,functionCall:this.onWindowResize}];this.setupEvents()}},{key:'onWindowResize',value:function onWindowResize(){var b=this;clearTimeout(this.callbackTimeout);this.callbackTimeout=setTimeout(function(){b.sliderWidth=b.container.offsetWidth;b.goToSlide(b.currentSlide)},500)}},{key:'setupEvents',value:function setupEvents(){var b=this;this.events.forEach(function(c){if(!b.isTouchCapable()){c.attachTo.addEventListener(c.listeners.mouse,c.functionCall.bind(b),!1)}else{c.attachTo.addEventListener(c.listeners.touch,c.functionCall.bind(b),!1)}})}},{key:'onDragStart',value:function onDragStart(e){e.preventDefault()}},{key:'onDown',value:function onDown(e){this.cancelUpdate();this.update();this.mousedown={x:e.pageX||e.touches[0].pageX,y:e.pageY||e.touches[0].pageY,active:!0}}},{key:'onMove',value:function onMove(e){e.preventDefault();if(this.mousedown.active){var b=e.pageX||e.touches[0].pageX,c=e.clientY||e.touches[0].clientY;this.dx=0-(this.mousedown.x-b);if(this.dy){window.scrollBy(0,this.dy-c)}this.dy=c}}},{key:'onUp',value:function onUp(e){this.mousedown={x:0,y:0,active:!1};this.cancelUpdate();this.sliderX+=this.dx;this.customEvents.sliderdrop.event.dx=this.dx;this.dx=0;this.dy=!1;this.container.dispatchEvent(this.customEvents.sliderdrop.event)}},{key:'onLeave',value:function onLeave(e){if(this.mousedown.active){this.container.dispatchEvent(this.customEvents.sliderdrop.event)}this.mousedown={x:0,y:0,active:!1};this.cancelUpdate();this.sliderX+=this.dx;this.customEvents.sliderdrop.event.dx=this.dx;this.dx=0}},{key:'onSliderDrop',value:function onSliderDrop(e){var c=this;var b=function(f){var g=e.dx<0?0-e.dx:e.dx,h=g%c.sliderWidth>c.sliderWidth/6,j=e.dx<0?'left':'right';return{amount:g,threshholdCrossed:h,direction:j}}();if(this.options.snapToNearest&&!this.isAnimating){var d=this.currentSlide;if(b.threshholdCrossed){switch(b.direction){case'left':d++;break;case'right':d--;break;}}this.goToSlide(d)}}},{key:'go',value:function go(b){switch(b){case'next':{this.goToSlide(this.currentSlide+1);break}case'previous':{this.goToSlide(this.currentSlide-1);break}}}},{key:'goToSlide',value:function goToSlide(b){var g=this;this.isAnimating=!0;this.toggleSmoothAnimation(!0);var c={},d=this.children.length/this.concurrentSlides;if(b>=d){b=d-1;c.direction='right';c.slideNumber=b}if(b<0){b=0;c.direction='left';c.slideNumber=b}var f=0-b*this.sliderWidth;this.transform(f,function(x){g.callbackTimeout=setTimeout(function(){g.sliderX=x;g.isAnimating=!1;g.currentSlide=b;g.toggleSmoothAnimation(!1);if(c.direction!=null){g.customEvents.boundsreached.event.data=c;g.container.dispatchEvent(g.customEvents.boundsreached.event)}g.customEvents.slidecomplete.event.data={currentSlide:g.currentSlide};g.container.dispatchEvent(g.customEvents.slidecomplete.event)},g.transitionDuration)})}},{key:'toggleSmoothAnimation',value:function toggleSmoothAnimation(b){if(b){this.slides.style.transitionDuration=this.slides.style.WebkitTransitionDuration=this.transitionDuration+'ms';this.slides.style.transitionProperty=this.slides.style.WebkitTransitionProperty='transform'}else{this.slides.style.transitionDuration=this.slides.style.WebkitTransitionDuration='initial';this.slides.style.transitionProperty=this.slides.style.WebkitTransitionProperty='initial'}}},{key:'isTouchCapable',value:function isTouchCapable(){return'ontouchstart'in document.documentElement}},{key:'update',value:function update(){this.animationFrameId=this.requestAnimationFrame(this.update.bind(this));var b=this.sliderX+this.dx;this.transform(b)}},{key:'transform',value:function transform(b,c){if(typeof b!='number'){throw{error:'Not a number',message:'translateX parameter needs to be a number. You passed in:  $(typeof translateX)'}}this.slides.style.transform=this.slides.style.webkitTransform='translate3d('+b+'px,0,0)';if(typeof c!=null&&typeof c=='function'){c(b)}}},{key:'cancelUpdate',value:function cancelUpdate(){window.cancelAnimationFrame(this.animationFrameId);this.animationFrameId=0}},{key:'requestAnimationFrame',value:function requestAnimationFrame(b){return window.requestAnimationFrame(b)||window.webkitRequestAnimationFrame(b)||window.mozRequestAnimationFrame(b)||window.oRequestAnimationFrame(b)||window.msRequestAnimationFrame(b)||window.setTimeout(b,16.666666666666668)}}]);return a}();var Slider=function(){function a(){_classCallCheck(this,a);this.sliderElements=[]}_createClass(a,[{key:'setup',value:function setup(b,c){return new SliderElement(b,c)}}]);return a}();